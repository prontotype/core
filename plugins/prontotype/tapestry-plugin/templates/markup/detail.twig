{% extends '@tapestry/layouts/sidebar.twig' %}

{% block main %}

<ul>
    <li><a href="{{ pt.tapestry.view.markupUrl(template.getUrlPath(), 'preview') }}">Preview</a></li>
    <li><a href="{{ pt.tapestry.view.markupUrl(template.getUrlPath(), 'highlight') }}">Highlighted</a></li>
    <li><a href="{{ pt.tapestry.view.markupUrl(template.getUrlPath(), 'raw') }}">Raw</a></li>
    <li><a href="{{ pt.tapestry.view.markupUrl(template.getUrlPath(), 'download') }}">Download</a></li>
</ul>

<h2>Preview</h2>

<iframe src="{{ pt.tapestry.view.markupUrl(template.getUrlPath(), 'preview') }}" frameborder="0"></iframe>

{% set mergedContent %}
{% if modifiers|length %}<!-- {{ template.getTitle() }} -->
{% endif %}
{{ template.render() }}

{% for variant in modifiers %}
<!-- {{ variant.getTitle() }} -->
{{ variant.render() }}

{% endfor %}
{% endset %}

<h2>HTML</h2>
{% include '@tapestry/partials/highlight.twig' with {content: mergedContent} %}

{% set mergedNotes %}
{{ template.getNotes() }}
{% for variant in modifiers %}
{{ variant.getNotes() }}
{% endfor %}
{% endset %}

{% if mergedNotes|trim %}
<h2>Notes</h2>
{{ mergedNotes|markdown }}
{% endif %}

{% endblock %}